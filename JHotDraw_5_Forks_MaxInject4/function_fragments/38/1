    boolean isPainting() {
        Container component = this;
        while (component != null) {
            if (component instanceof JComponent &&
                   ((JComponent)component).getFlag()) {
                return true;
            }
            component = component.getParent();
        }
        return false;
    }
